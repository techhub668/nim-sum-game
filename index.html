<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nim Sum Master - Combinatorial Game Theory</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="lang-toggle">
                <button class="lang-btn active" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="zh-TW">ÁπÅ</button>
            </div>
            <h1 data-i18n="title">Nim Sum Master</h1>
            <p class="subtitle" data-i18n="subtitle">Master Combinatorial Game Theory Through Play</p>
        </header>

        <nav class="main-nav">
            <button class="nav-btn active" data-section="home" data-i18n="nav.home">Home</button>
            <button class="nav-btn" data-section="single-pile" data-i18n="nav.single">1 Pile</button>
            <button class="nav-btn" data-section="two-piles" data-i18n="nav.two">2 Piles</button>
            <button class="nav-btn" data-section="multi-piles" data-i18n="nav.multi">Multi-Piles</button>
            <button class="nav-btn" data-section="theory" data-i18n="nav.theory">Learn Theory</button>
            <button class="nav-btn" data-section="practice" data-i18n="nav.practice">Practice</button>
        </nav>

        <!-- Home Section -->
        <section id="home" class="section active">
            <div class="welcome-card">
                <h2 data-i18n="home.welcome">Welcome to Nim Sum Master!</h2>
                <p data-i18n="home.intro">Learn the winning strategy for the classic Game of Nim - a fundamental concept in Combinatorial Game Theory often featured in Math Olympiad competitions.</p>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">1</div>
                        <h3 data-i18n="home.singleTitle">Single Pile</h3>
                        <p data-i18n="home.singleDesc">Start with basics - learn when you can guarantee a win with one pile of matchsticks.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">2</div>
                        <h3 data-i18n="home.twoTitle">Two Piles</h3>
                        <p data-i18n="home.twoDesc">Master the strategy for two-pile games using the XOR principle.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">N</div>
                        <h3 data-i18n="home.multiTitle">Multi-Piles</h3>
                        <p data-i18n="home.multiDesc">Apply Nim Sum theory to any number of piles and never lose again!</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">?</div>
                        <h3 data-i18n="home.theoryTitle">Learn Theory</h3>
                        <p data-i18n="home.theoryDesc">Understand the mathematical theory behind the winning strategy.</p>
                    </div>
                </div>

                <button class="start-btn" onclick="navigateTo('single-pile')" data-i18n="home.startBtn">Start Learning!</button>
            </div>
        </section>

        <!-- Single Pile Section -->
        <section id="single-pile" class="section">
            <h2 data-i18n="single.title">Single Pile Game</h2>
            <div class="game-info">
                <p><strong data-i18n="single.rulesLabel">Rules:</strong> <span id="single-rules-text">Two players take turns removing 1 to <span id="max-take-display">3</span> matchsticks from a pile. The player who takes the last matchstick <span id="last-wins-text">wins</span>!</span></p>
            </div>

            <div class="settings-panel">
                <div class="setting">
                    <label data-i18n="single.pileSize">Pile Size:</label>
                    <input type="number" id="single-pile-size" value="12" min="1" max="50">
                </div>
                <div class="setting">
                    <label data-i18n="single.maxTake">Max Take Per Turn:</label>
                    <input type="number" id="single-max-take" value="3" min="1" max="10">
                </div>
                <div class="setting">
                    <label data-i18n="single.lastMatch">Last Matchstick:</label>
                    <select id="single-last-wins">
                        <option value="true" data-i18n="single.winsOption">Wins</option>
                        <option value="false" data-i18n="single.losesOption">Loses</option>
                    </select>
                </div>
                <button class="btn" onclick="startSinglePileGame()" data-i18n="single.startGame">Start Game</button>
                <button class="btn secondary" onclick="showSinglePileStrategy()" data-i18n="single.showStrategy">Show Strategy</button>
            </div>

            <div id="single-pile-game" class="game-board hidden">
                <div class="pile-container">
                    <div class="pile" id="single-pile-display"></div>
                    <p class="pile-count"><span data-i18n="single.remaining">Remaining:</span> <span id="single-remaining">0</span></p>
                </div>

                <div class="turn-info">
                    <p id="single-turn-text" data-i18n="single.yourTurn">Your Turn</p>
                    <p id="single-status"></p>
                </div>

                <div class="action-buttons" id="single-actions"></div>
            </div>

            <div id="single-strategy" class="strategy-panel hidden">
                <h3 data-i18n="single.strategyTitle">Strategy Analysis</h3>
                <div id="single-strategy-content"></div>
            </div>
        </section>

        <!-- Two Piles Section -->
        <section id="two-piles" class="section">
            <h2 data-i18n="two.title">Two Piles Game</h2>
            <div class="game-info">
                <p><strong>Rules:</strong> <span data-i18n="two.rules">There are 2 piles of different number of matchsticks. Two players take turns removing any number of matchsticks from ONE of the piles. The player who takes the last matchstick wins! How many matchsticks should the first mover take to guarantee a win?</span></p>
            </div>

            <div class="settings-panel">
                <div class="setting">
                    <label data-i18n="two.pile1">Pile 1:</label>
                    <input type="number" id="pile1-size" value="22" min="1" max="50">
                </div>
                <div class="setting">
                    <label data-i18n="two.pile2">Pile 2:</label>
                    <input type="number" id="pile2-size" value="36" min="1" max="50">
                </div>
                <div class="setting">
                    <label data-i18n="two.whoFirst">Who Goes First:</label>
                    <select id="two-first-player">
                        <option value="player" data-i18n="two.you">You</option>
                        <option value="computer" data-i18n="two.computer">Computer</option>
                    </select>
                </div>
                <button class="btn" onclick="startTwoPilesGame()" data-i18n="two.startGame">Start Game</button>
                <button class="btn secondary" onclick="showTwoPilesStrategy()" data-i18n="two.showStrategy">Show Strategy</button>
            </div>

            <div id="two-piles-game" class="game-board hidden">
                <div class="piles-row">
                    <div class="pile-container" onclick="selectPile(0)">
                        <h4 data-i18n="two.pile1">Pile 1</h4>
                        <div class="pile" id="pile1-display"></div>
                        <p class="pile-count"><span id="pile1-remaining">0</span></p>
                    </div>
                    <div class="pile-container" onclick="selectPile(1)">
                        <h4 data-i18n="two.pile2">Pile 2</h4>
                        <div class="pile" id="pile2-display"></div>
                        <p class="pile-count"><span id="pile2-remaining">0</span></p>
                    </div>
                </div>

                <div class="turn-info">
                    <p id="two-turn-text" data-i18n="two.yourTurn">Your Turn</p>
                    <p id="two-nim-sum"><span data-i18n="two.nimSum">Nim Sum:</span> <span id="nim-sum-value">0</span></p>
                    <p id="two-status"></p>
                </div>

                <div id="two-pile-select" class="hidden">
                    <p><span data-i18n="two.selectedPile">Selected Pile:</span> <span id="selected-pile-num">-</span></p>
                    <label data-i18n="two.takeLbl">Take:</label>
                    <input type="number" id="two-take-amount" value="1" min="1">
                    <button class="btn" onclick="makeTwoPilesMove()" data-i18n="two.takeBtn">Take</button>
                </div>
            </div>

            <div id="two-strategy" class="strategy-panel hidden">
                <h3 data-i18n="two.strategyTitle">Strategy Analysis</h3>
                <div id="two-strategy-content"></div>
            </div>
        </section>

        <!-- Multi-Piles Section -->
        <section id="multi-piles" class="section">
            <h2 data-i18n="multi.title">Multi-Piles Nim Game</h2>
            <div class="game-info">
                <p><strong>Rules:</strong> <span data-i18n="multi.rules">Multiple piles of matchsticks. Take any number from ONE pile per turn. Last matchstick wins!</span></p>
            </div>

            <div class="settings-panel">
                <div class="setting">
                    <label data-i18n="multi.numPiles">Number of Piles:</label>
                    <input type="number" id="num-piles" value="3" min="2" max="6" onchange="updatePileInputs()">
                </div>
                <div id="pile-inputs" class="pile-inputs">
                    <div class="setting">
                        <label>Pile 1:</label>
                        <input type="number" class="multi-pile-input" value="3" min="1" max="50">
                    </div>
                    <div class="setting">
                        <label>Pile 2:</label>
                        <input type="number" class="multi-pile-input" value="5" min="1" max="50">
                    </div>
                    <div class="setting">
                        <label>Pile 3:</label>
                        <input type="number" class="multi-pile-input" value="7" min="1" max="50">
                    </div>
                </div>
                <button class="btn" onclick="startMultiPilesGame()" data-i18n="multi.startGame">Start Game</button>
                <button class="btn secondary" onclick="showMultiPilesStrategy()" data-i18n="multi.showStrategy">Show Strategy</button>
                <button class="btn secondary" onclick="randomizeMultiPiles()" data-i18n="multi.randomSetup">Random Setup</button>
            </div>

            <div id="multi-piles-game" class="game-board hidden">
                <div class="piles-row" id="multi-piles-display"></div>

                <div class="turn-info">
                    <p id="multi-turn-text" data-i18n="multi.yourTurn">Your Turn</p>
                    <div id="multi-nim-sum-display" class="nim-sum-breakdown"></div>
                    <p id="multi-status"></p>
                </div>

                <div id="multi-pile-select" class="hidden">
                    <p><span data-i18n="multi.selectedPile">Selected Pile:</span> <span id="multi-selected-pile-num">-</span></p>
                    <label data-i18n="multi.takeLbl">Take:</label>
                    <input type="number" id="multi-take-amount" value="1" min="1">
                    <button class="btn" onclick="makeMultiPilesMove()" data-i18n="multi.takeBtn">Take</button>
                </div>
            </div>

            <div id="multi-strategy" class="strategy-panel hidden">
                <h3 data-i18n="multi.strategyTitle">Strategy Analysis</h3>
                <div id="multi-strategy-content"></div>
            </div>
        </section>

        <!-- Theory Section -->
        <section id="theory" class="section">
            <h2 data-i18n="theory.title">Nim Sum Theory</h2>
            <div class="theory-content" id="theory-content"></div>
        </section>

        <!-- Practice Section -->
        <section id="practice" class="section">
            <h2 data-i18n="practice.title">Practice Problems</h2>
            <p class="practice-intro" data-i18n="practice.intro">Test your understanding with these Math Olympiad-style problems!</p>

            <div id="practice-problem" class="practice-card">
                <div class="problem-header">
                    <span class="problem-number"><span data-i18n="practice.problemLabel">Problem</span> <span id="problem-num">1</span></span>
                    <span class="problem-difficulty" id="problem-difficulty">Easy</span>
                </div>
                <div id="problem-text" class="problem-text"></div>
                <div class="answer-section">
                    <input type="number" id="user-answer" data-i18n-placeholder="practice.yourAnswer" placeholder="Your answer">
                    <button class="btn" onclick="checkAnswer()" data-i18n="practice.checkAnswer">Check Answer</button>
                    <button class="btn secondary" onclick="showHint()" data-i18n="practice.hint">Hint</button>
                    <button class="btn secondary" onclick="showSolution()" data-i18n="practice.solution">Solution</button>
                </div>
                <div id="feedback" class="feedback hidden"></div>
                <div id="hint-box" class="hint-box hidden"></div>
                <div id="solution-box" class="solution-box hidden"></div>
            </div>

            <div class="practice-nav">
                <button class="btn" onclick="prevProblem()" data-i18n="practice.previous">Previous</button>
                <button class="btn" onclick="nextProblem()" data-i18n="practice.next">Next Problem</button>
                <button class="btn secondary" onclick="randomProblem()" data-i18n="practice.random">Random</button>
            </div>

            <div class="score-display">
                <p><span data-i18n="practice.score">Score:</span> <span id="score">0</span> / <span id="total-attempted">0</span></p>
            </div>
        </section>

        <footer>
            <p data-i18n="footer.line1">Nim Sum Master - Learn Combinatorial Game Theory</p>
            <p data-i18n="footer.line2">Perfect for Math Olympiad preparation!</p>
        </footer>
    </div>

    <script src="translations.js"></script>
    <script src="game.js"></script>
</body>
</html>
